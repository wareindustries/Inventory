local l__LocalPlayer__1 = game.Players.LocalPlayer

function findRemote(RemoteType)
    local Remote;
    for _,v in pairs(l__LocalPlayer__1:GetChildren()) do
        local Name = v.Name:lower()
        if(v.ClassName == RemoteType and (Name:match('server') or Name:match('function') or Name:match('event'))) then
            Remote = v
        end
    end
    return Remote
end

function FindBackground()
    for _,inst in pairs(l__LocalPlayer__1.PlayerGui:GetDescendants()) do
        if((inst.Name == 'Inv' or inst.Name == 'Equipped') and (inst.Parent.ClassName == 'Frame' or inst.Parent.ClassName == 'ImageLabel')) then
            return inst.Parent
        end
    end
end

function AddToDataStore()
    local v40 = require(l__LocalPlayer__1.Character:WaitForChild("Animations"))
    local v41 = require(l__LocalPlayer__1.Character:WaitForChild("Modifiers"))
    local Background = FindBackground()
    local Equipped = Background:WaitForChild("Equipped")
    local l__Body__44 = Background:WaitForChild("Body")
    local l__Inv__45 = Background:WaitForChild("Inv")
    u3 = {
        Equipped = {},
        Inventory = {},
        Body = {}
    }
    local v46 = Equipped:GetChildren()
    for v47 = 1, #v46 do
        local v48 = {
            Name = "",
            Stack = 0
        }
        local v49 = v46[v47]:GetChildren()
        local v50 = nil
        for v51 = 1, #v49 do
            if v49[v51]:isA("Tool") then
                v50 = v49[v51]
            end
        end
        if v50 ~= nil then
            if v50.Configuration:FindFirstChild("Stack") then
                v48.Name = v50.Name
                v48.Stack = v50.Configuration.Stack.Value
            else
                v48.Name = v50.Name
                v48.Stack = 0
            end
        else
            v48.Name = nil
            v48.Stack = nil
        end
        u3.Equipped[v47] = v48
    end
    local v52 = l__Inv__45:GetChildren()
    for v53 = 1, #v52 do
        local v54 = {
            Name = "",
            Stack = 0
        }
        local v55 = v52[v53]:GetChildren()
        local v56 = nil
        for v57 = 1, #v55 do
            if v55[v57]:isA("Tool") then
                v56 = v55[v57]
            end
        end
        if v56 ~= nil then
            if v56.Configuration:FindFirstChild("Stack") then
                v54.Name = v56.Name
                v54.Stack = v56.Configuration.Stack.Value
            else
                v54.Name = v56.Name
                v54.Stack = 0
            end
        else
            v54.Name = nil
            v54.Stack = nil
        end
        u3.Inventory[v53] = v54
    end
    local v58 = l__Body__44:GetChildren()
    for v59 = 1
            if v129:IsA("Frame") and v129.LayoutOrder == 0 then
                v129.Visible = false
            elseif v129:IsA("ImageButton") and v129:FindFirstChild("Slot") then
                if v129.Slot.Value == p18.Slot.Value then
                    v129.Visible = false
                end
            end
        end
        v126.Parent = Inv
        v127.Parent = v126
        v126.Interact:Destroy()
        v126.Mass:Destroy()
        v126.PrimaryPart = v126.Handle
        v126.Handle.Massless = true
        v126.Handle.Mass.Value = 0
        v126.Handle.Size = Vector3.new(0.2, 0.2, 0.2)
        v126.Handle.Transparency = 1
        v126.Handle.CanCollide = false
        v126.Handle.Locked = true
        v126.Handle.BrickColor = BrickColor.new("Bright blue")
        v126.Handle.Anchored = true
        v126.Handle.Parent = v126
        v126.Parent = l__LocalPlayer__1.Backpack
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.RemoveFromInv = function(p19)
    local Background = FindBackground()
    local Inv = Background:WaitForChild("Inv")
    local v130 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        local v131 = l__LocalPlayer__1.Backpack:FindFirstChild(p19.Name)
        if v131 then
            v131.Parent = nil
        end
        for v132 = 1, 21 do
            pcall(function()
                local v133 = Inv[v132]
                if v133:IsA("ImageButton") and v133:FindFirstChild("Slot") and v133.Slot.Value == p19.Slot.Value then
                    v133.Visible = true
                end
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.RemoveEquipped = function(p20)
    local Background = FindBackground()
    local Equipped = Background:WaitForChild("Equipped")
    local v134 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        local v135 = l__LocalPlayer__1.Character:FindFirstChild(p20.Name)
        if v135 then
            v135.Parent = nil
        end
        for v136 = 1, 21 do
            pcall(function()
                local v137 = Equipped[v136]
                if v137:IsA("ImageButton") and v137:FindFirstChild("Slot") and v137.Slot.Value == p20.Slot.Value then
                    v137.Visible = true
                end
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.ClearEquipped = function()
    local Background = FindBackground()
    local Equipped = Background:WaitForChild("Equipped")
    local v138 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        for v139 = 1, 21 do
            pcall(function()
                local v140 =
                Equipped[v139].Visible = true
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.ClearInventory = function()
    local Background = FindBackground()
    local Inv = Background:WaitForChild("Inv")
    local v141 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        for v142 = 1, 21 do
            pcall(function()
                local v143 = Inv[v142]
                v143.Visible = true
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.EquipItem = function(p21)
    local Background = FindBackground()
    local Inv = Background:WaitForChild("Inv")
    local Equipped = Background:WaitForChild("Equipped")
    local v144 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        local v145 = Inv:FindFirstChild(p21.Name)
        if v145 then
            v145.Parent = nil
        end
        for v146 = 1, 21 do
            pcall(function()
                local v147 = Equipped[v146]
                if v147:IsA("ImageButton") and v147:FindFirstChild("Slot") and v147.Visible == false then
                    v147.Visible = true
                    v147.Slot.Value = p21.Slot.Value
                    v147.Image = p21.Image
                    v147.Parent = Equipped
                end
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

MainFunction.UnequipItem = function(p22)
    local Background = FindBackground()
    local Inv = Background:WaitForChild("Inv")
    local Equipped = Background:WaitForChild("Equipped")
    local v148 = false
    if not _G.databusy and true then
        Background.Saving.Visible = true
        _G.databusy = true
        local v149 = Equipped:FindFirstChild(p22.Name)
        if v149 then
            v149.Parent = nil
        end
        for v150 = 1, 21 do
            pcall(function()
                local v151 = Inv[v150]
                if v151:IsA("ImageButton") and v151:FindFirstChild("Slot") and v151.Slot.Value == p22.Slot.Value then
                    v151.Visible = true
                end
            end)
        end
        wait(1)
        AddToDataStore()
        _G.databusy = false
    end
end

return MainFunction
